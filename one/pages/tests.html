<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../../layui/css/layui.css">
</head>

<body>
    <!-- <form id="fileform" method="post" enctype='multipart/form-data'> -->
    <!-- <input type="file" lay-filter="fileup"> -->
    <!-- <input type="submit" lay-type="file" class="layui-btn" name="file" lay-submit="" lay-filter="file"> -->
    <input type="text" class="uname" name="uname"><br>
    <input type="text" class="upwd" name="upwd"><br>
    <input type="file" id="xxxxx" name="file"><br>
    <!-- <input type="submit" class="submit" value="提交"> -->
    <button class="aaaa">提交</button>
    <!-- </form> -->
    <!-- <div class="layui-upload">
        <button class="layui-btn layui-btn-normal" id="test8" type="button">选择文件</button>
        <input type="file" name="file" id="test9" type="button">
    </div> -->
    <script src="../js/jquery-1.7.1.js"></script>
    <script src="../js/ajaxfileupload1.js"></script>
    <script src="../../layui/layui.all.js"></script>
    <script>
        $(".aaaa").click(function() {
            var uname = $(".uname").val();
            var upwd = $(".upwd").val();
            $.ajaxFileUpload({
                url: './aa.php',
                secureuri: false, //一般设置为false
                fileElementId: "xxxxx", //文件上传空间的id属性
                dataType: 'json', //返回值类型 一般设置为json
                data: {
                    uname: uname,
                    upwd: upwd
                },
                type: 'post',
                success: function(data, status) {
                    console.log(data);
                }
            });;
        });

        ! function() {
            var upload = layui.upload;
            var $ = layui.$;
            $(".submit").click(function(event) {
                event.preventDefault();
                var data = $("#fileform").serialize();
                var formData = new FormData($("#xxxxx"));
                console.log(formData);
            });

            // upload插件上传代码
            // function ajaxFileUpload(fileid, data) {
            //     $.ajaxFileUpload({
            //         url: 'http://192.168.0.71:8080/interview/create', //用于文件上传的服务器端请求地址
            //         secureuri: false, //一般设置为false
            //         fileElementId: fileid, //文件上传空间的id属性  <input type="file" id="file" name="file" />
            //         dataType: 'JSON', //返回值类型 一般设置为json
            //         data: data,
            //         type: 'POST',
            //         success: function(data, status) //服务器成功响应处理函数
            //             {},
            //         error: function(data, status, e) //服务器响应失败处理函数
            //             {}
            //     })
            //     return false;
            // }


            // upload.render({
            //     elem: '#beforefileUp',
            //     url: 'http://192.168.0.71:8080/interview/create',
            //     accept: 'file', //普通文件
            //     auto: false, //选择文件后不自动上传
            //     bindAction: '#submitfff',
            //     exts: 'txt',
            //     size: 10,
            //     data: {
            //         // var status = 0;
            //         // var name = $("#addadvance .talkname").val();
            //         // var type = parseInt($("input[name='type']:checked").val());
            //         // var compere = $("#addadvance input.compere").val();
            //         // var description = $("#addadvance .talkintro").val();
            //         // var guests = document.getElementsByClassName("guestlists");
            //         // var file = $("#addadvance input[type=file]")[0].files[0];
            //         // var speakername = [];
            //         // console.log(file);
            //         // for (var i = 0; i < guests.length; i++) {
            //         //     speakername.push(guests[i].innerHTML);
            //         // }
            //         name: function() {
            //             name = $("#addadvance .talkname").val();
            //             if (name == "") { alert("姓名不能为空") }
            //             return name = $("#addadvance .talkname").val();
            //         },
            //         status: 0,
            //         type: function() {
            //             return parseInt($("input[name='type']:checked").val());
            //         },
            //         compere: function() {
            //             return $("#addadvance input.compere").val();
            //         },
            //         description: function() {
            //             return $("#addadvance .talkintro").val();
            //         },
            //         speakername: function() {
            //             var guests = document.getElementsByClassName("guestlists");
            //             var speakername = [];
            //             for (var i = 0; i < guests.length; i++) {
            //                 speakername.push(guests[i].innerHTML);
            //             }
            //             return speakername;
            //         }
            //     },
            //     before: function(obj) {
            //         console.log(obj);
            //     },
            //     done: function(res) {
            //         layer.close();
            //     }
            // });
            // $("#submitfff").click(function() {
            //     // layer.closeAll();
            // });




            // upload.render({
            //     elem: '#test9',
            //     url: 'http://192.168.0.71:8080/prohibit/batchImport',
            //     multiple: true,
            //     accept: 'file', //普通文件
            //     exts: 'txt',
            //     size: 10,
            //     before: function(obj) {
            //         console.log(obj);
            //         //预读本地文件示例，不支持ie8
            //         // obj.preview(function(index, file, result) {
            //         //     $('#demo2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img">')
            //         // });
            //     },
            //     done: function(res) {
            //         //上传完毕
            //     }
            // });

            // layui.upload({
            //     url: 'http://192.168.0.71:8080/prohibit/batchImport',
            //     before: function(input) { //返回的参数item，即为当前的input DOM对象	   
            //         // $(input).after('<input type="hidden" name="mchId-file" value="11111"/>'); //layer.msg('文件上传中',{zIndex:20180509});
            //     },
            //     success: function(res) {
            //         console.log(res);
            //         if (res.code == 'success') {
            //             layer.msg(res.message, {
            //                 zIndex: 20180510
            //             });
            //             certLocalPath = res.filePath
            //         } else {
            //             layer.msg(res.message, {
            //                 zIndex: 20180510
            //             });
            //         }
            //     }
            // });
            // var form = layui.form;
            // form.on('submit(file)', function(data) {
            //     alert(data.field);
            //     $.ajax({
            //         cache: false,
            //         async: false,
            //         type: 'POST',
            //         contentType: 'application/form-data;charset=utf-8',
            //         url: 'http://192.168.0.71:8080/prohibit/batchImport',
            //         // traditional: true,
            //         // contentType: false,
            //         processData: false,
            //         // dataType: 'json',
            //         data: data.filed,
            //         success: function(data) {
            //             console.log(data);

            //         },
            //         error: function(err) {
            //             alert("修改失败");
            //         }
            //     });
            //     return false;
            // });
        }();
    </script>
</body>

</html>