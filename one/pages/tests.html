<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../../layui/css/layui.css">
</head>

<body>
    <form class="layui-form" lay-filter="test2" enctype='multipart/form-data'>
        <!-- <input type="file" lay-filter="fileup"> -->
        <!-- <input type="submit" lay-type="file" class="layui-btn" name="file" lay-submit="" lay-filter="file"> -->
        <input type="file" lay-type="file" id="xxxxx" name="file" class="layui-upload-file" value="tijiao">
    </form>
    <div class="layui-upload">
        <button class="layui-btn layui-btn-normal" id="test8" type="button">选择文件</button>
        <input type="file" name="file" id="test9" type="button">
    </div>

    <script src="../../layui/layui.all.js"></script>
    <script>
        ;
        ! function() {
            var upload = layui.upload;
            var $ = layui.$;
            upload.render({
                elem: '#test9',
                url: 'http://192.168.0.71:8080/prohibit/batchImport',
                multiple: true,
                accept: 'file', //普通文件
                exts: 'txt',
                size: 10,
                before: function(obj) {
                    console.log(obj);
                    //预读本地文件示例，不支持ie8
                    // obj.preview(function(index, file, result) {
                    //     $('#demo2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img">')
                    // });
                },
                done: function(res) {
                    //上传完毕
                }
            });

            // layui.upload({
            //     url: 'http://192.168.0.71:8080/prohibit/batchImport',
            //     before: function(input) { //返回的参数item，即为当前的input DOM对象	   
            //         // $(input).after('<input type="hidden" name="mchId-file" value="11111"/>'); //layer.msg('文件上传中',{zIndex:20180509});
            //     },
            //     success: function(res) {
            //         console.log(res);
            //         if (res.code == 'success') {
            //             layer.msg(res.message, {
            //                 zIndex: 20180510
            //             });
            //             certLocalPath = res.filePath
            //         } else {
            //             layer.msg(res.message, {
            //                 zIndex: 20180510
            //             });
            //         }
            //     }
            // });
            // var form = layui.form;
            // form.on('submit(file)', function(data) {
            //     alert(data.field);
            //     $.ajax({
            //         cache: false,
            //         async: false,
            //         type: 'POST',
            //         contentType: 'application/form-data;charset=utf-8',
            //         url: 'http://192.168.0.71:8080/prohibit/batchImport',
            //         // traditional: true,
            //         // contentType: false,
            //         processData: false,
            //         // dataType: 'json',
            //         data: data.filed,
            //         success: function(data) {
            //             console.log(data);

            //         },
            //         error: function(err) {
            //             alert("修改失败");
            //         }
            //     });
            //     return false;
            // });
        }();
    </script>
</body>

</html>